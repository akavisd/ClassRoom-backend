/**
 * New node file
 */


mySQL = {};


function database(dbName, version, comment, dbSize){

	
 	var mysql      = require('./mysql');
 	
	var connection = mysql.createConnection({
		host     : 'localhost',
		user     : 'root',
		password : '',
		database : dbName
		});

	connection.connect(function(err) {
  		console.error(err);
	});
	
	

	var tx = {
		executeSql:function(sql, params, successCallback, errCallback){
			var self = this;
			//console.log(sql, params);
			
			connection.query(sql, params, function(err, rows, fields) {
				if (err) {
				 	console.error(err);
				 	errCallback(err)
				 	return;
				 }
				successCallback(self, {rows:rows, fields:fields});
				
			});
		},
	}; 

	this.transaction = function(callback){
		callback(tx);
	}

}

 
 mySQL.openDatabase = function(dbName, version, comment, dbSize){
 	console.log(" mySQL.openDatabase");
 	
 	return new database(dbName, version, comment, dbSize);
 }